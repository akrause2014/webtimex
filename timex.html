<!DOCTYPE html>
<html>
<head>
	<title>Timex</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="js/jquery.mobile.datepicker.css"/>
    <style>
    #listview li.active a {
        background: lightyellow !important;
    }
    </style>
    <script src="http://code.jquery.com/jquery-1.11.2.js"></script>
    <script src="jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="js/jquery.ui.datepicker.js"></script>
    <script id="mobile-datepicker" src="js/jquery.mobile.datepicker.js"></script>
    
    <script src="js/timex.js"></script>

<body>

<div data-role="page" id="tracker">

	<div data-role="header" id="trackerHeader">
        <a href="#documentation" class="ui-btn ui-icon-info ui-btn-icon-notext ui-btn-left ui-corner-all" data-transition="slide" data-direction="reverse"></a>
        <h2><div id="tracker_date"></div></h2>
        <a href="#menu" class="ui-btn ui-icon-bars ui-btn-icon-notext ui-btn-right ui-corner-all"></a>
	</div><!-- /header -->
  
    <div data-role="panel" id="menu" data-display="overlay" data-position="right" >
        <div class="ui-corner-all custom-corners">
          <div class="ui-bar ui-bar-a">
            <h3>Projects</h3>
          </div>
          <div class="ui-body ui-body-a" >
             <a href="#editProjects" class="ui-btn ui-shadow">Edit Data</a>
             <a href="#addProject" data-rel="popup" class="ui-btn ui-shadow">Add Project</a>
             <button id="deleteProjectButton" class="ui-btn ui-shadow" data-rel="close">Delete Selected</button>
          </div>
        </div>
        <div class="ui-corner-all custom-corners">
          <div class="ui-bar ui-bar-a">
            <h3>Report</h3>
          </div>
          <div class="ui-body ui-body-a" >
             <a href="#report" class="ui-btn ui-shadow" data-transition="slide">Create Report</a>
          </div>
        </div>
        <div class="ui-corner-all custom-corners">
          <div class="ui-bar ui-bar-a">
            <h3>Data Store</h3>
          </div>
          <div class="ui-body ui-body-a" >
              <a href="#database" class="ui-btn ui-shadow" data-transition="slide">Synchronise</a>
          </div>
        </div>
    </div>
    <div data-role="panel" id="addProject" data-display="overlay" data-position="right">
        <div>
            <label for="projectName">Project Name:</label>
            <input id="projectName" value="" data-theme="a" type="text">
        </div>
        <div>
            <button id="addProjectButton" class="ui-btn ui-corner-all ui-btn-inline" data-rel="close">Add</button>
            <button id="addProjectButtonCancel" class="ui-btn ui-corner-all ui-btn-inline" data-rel="close">Cancel</button>
        </div>
    </div>

    <div role="main" class="ui-content">
        
        <ul data-role="listview" data-inset="true" data-icon="false" id="listview">
            <li>
                <div class="ui-grid-a">
                    <div class="ui-block-a" style="width:60%">
                        <div class="ui-bar"><h3>Project</h3></div>
                    </div>
                    <div class="ui-block-b" style="width:40%">
                        <div class="ui-bar"><h3>Time</h3></div>
                    </div>
                </div>
            </li>
        </ul>
        <input id="stopTrackerButton" value="Pause" type="button" data-rel="close"></input> 
        
        
    </div>

</div><!-- /page -->

<!-- Start of second page -->
<div data-role="page" id="report">

	<div data-role="header">
		<a href="#tracker" class="ui-btn ui-btn-icon-left ui-icon-carat-l" data-transition="slide" data-direction="reverse">Tracker</a>
		<h1>Create Report</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
        
        <h3>Select a date range:</h3>
        <div>
            <input type="text" data-role="date" id="startDate">
            <input type="text" data-role="date" id="endDate">
        </div>
        <a href="#reportResult" id="reportSubmitButton" class="ui-btn" data-transition="slide">Submit</a>

        <h3>Or select one of the following:</h3>
        <div>
            <a href="#reportResult" class="ui-btn" id="reportThisWeekButton" data-transition="slide">This Week</a>
            <a href="#reportResult" class="ui-btn" id="reportLastWeekButton" data-transition="slide">Last Week</a>
            <a href="#reportResult" class="ui-btn" id="reportThisMonthButton" data-transition="slide">This Month</a>
            <a href="#reportResult" class="ui-btn" id="reportLastMonthButton" data-transition="slide">Last Month</a>
        </div>
        
    </div>

</div><!-- /page -->

<div data-role="page" id="reportResult">

	<div data-role="header">
		<a href="#report" class="ui-btn ui-btn-icon-left ui-icon-carat-l" data-transition="slide" data-direction="reverse">Report</a>
		<h1 id="report_date_range">Report</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
        
        <ul data-role="listview" data-inset="true" data-icon="false" id="reportListView">
            <li>
                <div class="ui-grid-a">
                    <div class="ui-block-a" style="width:60%">
                        <div class="ui-bar"><h3>Project</h3></div>
                    </div>
                    <div class="ui-block-b" style="width:40%">
                        <div class="ui-bar"><h3>Time</h3></div>
                    </div>
                </div>
            </li>
        </ul>
        
        <a id="downloadReportAsJSON" class="ui-btn ui-shadow">Download as JSON</a>
    </div>

</div>

<div data-role="page" id="editProjects">

	<div data-role="header">
		<a href="#tracker" class="ui-btn ui-btn-icon-left ui-icon-carat-l" data-transition="slide" data-direction="reverse">Tracker</a>
		<h1>Edit</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
        <div>
            <div>Enter a date (format YYYY-MM-DD). <i>Note: Before editing today's times you must pause the tracker.</i></div>
            
            <!--<div><input type="text" type="date" id="editDate"></div>-->
            <div class="ui-grid-b">
                <div class="ui-block-a" style="width:20%">
                    <span style="float:right;">
                        <a href="" id="editLoadPrevDateButton" class="ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all" type="button"></a>
                    </span>
                </div>
                <div class="ui-block-b" style="width:40%">
                    <input type="text" type="date" id="editDate">
                </div>
                <div class="ui-block-c" style="width:20%">
                     <a href="" id="editLoadNextDateButton" class="ui-btn ui-icon-carat-r ui-btn-icon-notext ui-corner-all" type="button"></a>
                </div>
            </div>
                
            <input id="editLoadButton" data-inline="true" value="Load" type="button"></input>
            <input id="editSaveButton" data-inline="true" value="Save" type="button" disabled=""></input>
            <input id="editCancelButton" data-inline="true" value="Cancel" type="button"></input>
        </div>
        <ul data-role="listview" data-inset="true" data-icon="false" id="editListView">
           <li data-role="list-divider"><h2>Please select a date.<h2></li>
        </ul>
        <form>
            <label for="editAddProjectText">Add a project:</label>
            <input type="text" disabled="" id="editAddProjectText"></input>
            <input id="editAddProjectButton" data-inline="true" value="Add Project" type="button" disabled=""></input>
        </form>
    </div>

</div>

<div data-role="page" id="allRecords">
    <div data-role="main" class="ui-content">
        <div>
            <a id="downloadDatabaseAsJSON" class="ui-btn ui-shadow">Download as JSON</a>
        </div>
        <div>
            <pre id="databaseContents"></pre>
        </div>
    </div>
</div>

<div data-role="page" id="database">
	<div data-role="header">
		<a href="#tracker" class="ui-btn ui-btn-icon-left ui-icon-carat-l" data-transition="slide" data-direction="reverse">Tracker</a>
		<h1>Timex Database</h1>
	</div><!-- /header -->

    <div data-role="main" class="ui-content">

        <h2>Export</h1>
        <p>
            Download the current content from the database as a JSON file.
        </p>
        <a href="#allRecords" id="exportDataButton" class="ui-btn ui-shadow" data-transition="slide">Export as JSON</a>
        
        <h2>Import</h2>
        <p>
            Inserts new dates and updates existing dates. Note that this may replace existing records.
        </p>
        <div>
            <input type="file" id="importDataFile"></a>
            <a id="importDataButton" class="ui-btn ui-shadow">Import from JSON</a>
        </div>
        
        <h2>Delete</h2>
        <p>
            Clear the database. 
        </p>
        <a id="clearDataButton" class="ui-btn ui-shadow">Clear Database</a>
        

    </div>
</div>

<div data-role="page" id="documentation">
    <div data-role="header">
        <h1>Documentation</h1>
        <a href="#tracker" class="ui-btn ui-btn-right ui-icon-home ui-btn-icon-notext" data-transition="slide">Tracker</a>
    </div><!-- /header -->
    <div role="main" class="ui-content">
        <h3>Tracker</h3>
        <p>
            When the tracker is opened the first time the project list is empty. 
            To add a project, click on the menu button at the top right  and select "Add Project".
        </p>
        <p>
            To activate a project select it in the list. 
            To pause the active project use the "Pause" button.
            An active project is restored when the browser window is closed and reopened or the page is reloaded.
        </p>
        <p>
            To delete a project click on the project in the list and select "Delete Selected" from the menu.
            This deletes the data of the selected project for today.
        </p>
        <p>
            At the end of the day it is important to stop the activity by pressing the "Stop" button.
            This completes the day and stores the record. 
            Otherwise the selected project remains active - 
            <i>closing the window does not stop the tracker.</i>
        </p>
        <p>
            The timex data is stored locally in the browser. 
            You cannot see the data from another browser, nor can anyone else access your data.
            If accessing the page from another browser a new empty data store is created.
            See <i>Database</i> below for synchronising the contents of the data store with another instance.
        </p>
        <h3>Editing</h3>
        <p>
            It is possible to edit the existing records. Select "Edit data" from the menu.
            Enter the date or use the buttons next to the text input to move to the next or previous day of the current date.
            Click "Load" to load the timex data for the selected day into the table. Click "Save" to update the record, or "Cancel".
        </p>
        <h3>Report</h3>
        <p>
            To create a report select "Create Report" in the menu and select a start date and end date. 
            (Note that the date is displayed in the format "MM/DD/YYYY".)
            Or select one of the date ranges below, for last week or last month for example.
            The report can be saved as a JSON file.
        </p>
        <h3>Data</h3>
        <p>
            To synchronise the timex store with another instance the contents of the data store can be 
            dumped to a JSON file.
            When importing this JSON file into another instance the import data is inserted into the 
            data store day by day.
            Note that this overwrites existing days in the data store if the dates match.
        </p>
    </div>
    <div data-role="footer">
        <a href="#tracker" class="ui-btn ui-btn-right ui-icon-carat-r ui-btn-icon-notext" data-transition="slide">Tracker</a>
    </div>
</div> 

</body>
</html>